/*
@id {7eeff186-cfb4-f7c3-21f2-a15f210dca49}
@name FakeSmile
@version 0.1.52
@description SMIL implementation in ECMAScript
@creator David Leunen (leunen.d@gmail.com)
@homepageURL http://leunen.me/fakesmile/
@ff_min_version 2.0
@ff_max_version 3.*
*/
// ==UserScript==
// @name smil
// @namespace svg.smil
// ==/UserScript==

/* MIT and GPL Licenses */

/*
Copyright 2008 David Leunen
Copyright 2012 Helder Magalhaes
*/

/**
 * Milliseconds Per Frame - relation between smoothness and CPU usage:
 * 40 for 25fps ("cine"-look, low CPU usage);
 * 33 for ~30fps (mild resources usage, best for most LCD displays);
 * 25 for 40fps (smoother animation, higher CPU usage);
 * 17 for ~60fps (high CPU usage, not recommended).
 * References:
 * http://en.wikipedia.org/wiki/Frame_rate#Frame_rates_in_film_and_television
 * http://knol.google.com/k/refresh-rate-frames-per-second-and-response-times-in-lcd-and-crt-technologies
 */
function initSMIL(){if(document.documentElement.getAttribute("smiling")=="fake")return;document.documentElement.setAttribute("smiling","fake");smile(document);timeZero=new Date;for(var e=0,t=animators.length;e<t;++e)animators[e].register();window.setInterval(animate,mpf)}function getURLCallback(e){if(e.success)smile(parseXML(e.content,document))}function xhrCallback(){if(this.readyState==4&&this.status==200&&this.responseXML!=null)smile(this.responseXML)}function smile(e){var t=null;var n=e.getElementsByTagName("*");for(var r=0,i=n.length;r<i;++r){var s=n.item(r);var o=s.namespaceURI;var u=s.localName;if(u.toLowerCase()=="link"&&s.getAttribute("rel")=="timesheet"&&s.getAttribute("type")=="application/smil+xml"||(o==timesheetns||o==smil3ns)&&u=="timesheet"){var a=s.getAttribute(u=="timesheet"?"src":"href");if(a&&a.length>0){if(!t){t=window.XMLHttpRequest?new XMLHttpRequest:window.ActiveXObject?new ActiveXObject("MSXML2.XMLHTTP.3.0"):null;if(t){if(t.overrideMimeType)t.overrideMimeType("text/xml");t.onreadystatechange=xhrCallback}}if(t){t.open("GET",a,false);t.send(null)}else if(window.getURL&&window.parseXML){getURL(a,getURLCallback)}}continue}var f=document.implementation;if(o==svgns&&!f.hasFeature("http://www.w3.org/TR/SVG11/feature#Animation","1.1")||o==smilanimns&&!f.hasFeature(smilanimns,"1.1")||o==smil2ns&&!f.hasFeature(smil2ns,"2.0")||o==smil21ns&&!f.hasFeature(smil21ns,"2.1")||o==smil3ns&&!f.hasFeature(smil3ns,"3.0")||o==timesheetns&&!f.hasFeature(timesheetns,"1.0")){if(u=="set"||u=="animate"||u=="animateColor"||u=="animateMotion"||u=="animateTransform"){var l=getTargets(s);var c=new Array;for(var h=0;h<l.length;++h){var p=l[h];var d=new Animator(s,p,h);animators.push(d);c[h]=d}s.animators=c;var v=s.getAttribute("id");if(v)id2anim[v]=s}}}}function getTargets(e){if(e.hasAttribute("select"))return select(e);var t=e.getAttributeNS(xlinkns,"href");if(t!=null&&t!="")return[document.getElementById(t.substring(1))];else{var n=e.parentNode;if(n.localName=="item"&&(n.namespaceURI==timesheetns||n.namespaceURI==smil3ns))return select(n);return[n]}}function select(e){var t=e.getAttribute("select");var n=e.parentNode;while(n&&n.nodeType==1){if(n.localName=="item"&&(n.namespaceURI==timesheetns||n.namespaceURI==smil3ns))t=n.getAttribute("select")+" "+t;n=n.parentNode}return document.querySelectorAll(t)}function getEventTargetsById(e,t){var n=null;if(e=="prev"){n=t.previousSibling;while(n&&n.nodeType!=1)n=n.previousSibling}if(n==null)n=document.getElementById(e);if(n==null)n=id2anim[e];if(n==null)return null;if(n.animators)return n.animators;return[n]}function Animator(e,t,n){this.anim=e;this.target=t;this.index=n;e.targetElement=t;this.attributeType=e.getAttribute("attributeType");this.attributeName=e.getAttribute("attributeName");if(this.attributeType!="CSS"&&this.attributeType!="XML"){if(propDefaults[this.attributeName]&&this.target.style.getPropertyValue(this.attributeName))this.attributeType="CSS";else this.attributeType="XML"}if(this.attributeType=="XML"&&this.attributeName){this.namespace=null;var r=this.attributeName.indexOf(":");if(r!=-1){var i=this.attributeName.substring(0,r);this.attributeName=this.attributeName.substring(r+1);var s=t;while(s&&s.nodeType==1){var o=s.getAttributeNS("http://www.w3.org/2000/xmlns/",i);if(o){this.namespace=o;break}s=s.parentNode}}}if(this.attributeName=="d")this.d();else if(this.attributeName=="points"){this.isInterpolable=function(e,t){return true};this.interpolate=function(e,t,n){var r=new Array;var i,s,o,u;for(var a=0;a<e.length&&a<t.length;++a){i=e[a].split(",");s=t[a].split(",");o=parseFloat(i[0])+(parseFloat(s[0])-i[0])*n;u=parseFloat(i[1])+(parseFloat(s[1])-i[1])*n;r.push(o+","+u)}return r.join(" ")};this.normalize=function(e){var t=e.split(" ");for(var n=t.length-1;n>=0;--n)if(t[n]=="")t.splice(n,1);return t}}this.from=e.getAttribute("from");this.to=e.getAttribute("to");this.by=e.getAttribute("by");this.values=e.getAttribute("values");if(this.values){this.values=this.values.trim();if(this.values.substring(this.values.length-1)==";")this.values=this.values.substring(0,this.values.length-1)}this.calcMode=e.getAttribute("calcMode");this.keyTimes=e.getAttribute("keyTimes");if(this.keyTimes){this.keyTimes=this.keyTimes.split(";");for(var u=0;u<this.keyTimes.length;++u)this.keyTimes[u]=parseFloat(this.keyTimes[u]);this.keyPoints=e.getAttribute("keyPoints");if(this.keyPoints){this.keyPoints=this.keyPoints.split(";");for(var u=0;u<this.keyPoints.length;++u)this.keyPoints[u]=parseFloat(this.keyPoints[u])}}this.keySplines=e.getAttribute("keySplines");if(this.keySplines){this.keySplines=this.keySplines.split(";");for(var u=0;u<this.keySplines.length;++u)this.keySplines[u]=createPath("M 0 0 C "+this.keySplines[u]+" 1 1")}this.dur=e.getAttribute("dur");if(this.dur&&this.dur!="indefinite")this.computedDur=toMillis(this.dur);this.max=e.getAttribute("max");if(this.max&&this.max!="indefinite"){this.computedMax=toMillis(this.max);if(!isNaN(this.computedMax)&&this.computedMax>0&&(!this.computedDur||this.computedDur>this.computedMax))this.computedDur=this.computedMax}this.min=e.getAttribute("min");if(this.min){this.computedMin=toMillis(this.min);if(!this.computedDur||this.computedDur<this.computedMin)this.computedDur=this.computedMin}this.fill=e.getAttribute("fill");this.type=e.getAttribute("type");this.repeatCount=e.getAttribute("repeatCount");this.repeatDur=e.getAttribute("repeatDur");this.accumulate=e.getAttribute("accumulate");this.additive=e.getAttribute("additive");this.restart=e.getAttribute("restart");if(!this.restart)this.restart="always";this.beginListeners=new Array;this.endListeners=new Array;this.repeatListeners=new Array;this.repeatIterations=new Array;var a=e.localName;if(a=="animateColor"){this.color()}else if(a=="animateMotion"){this.isInterpolable=function(e,t){return true};this.getCurVal=function(){var e=this.target.transform;if(e&&e.animVal.numberOfItems>0){var t=e.animVal;return decompose(t.getItem(0).matrix,"translate")}else return"0,0"};this.path=this.getPath();if(this.path){this.valueAt=function(e){var t=this.path.getTotalLength();var n=this.path.getPointAtLength(e*t);return n.x+","+n.y}}else{this.translation()}this.freeze=function(){var e=this.valueAt(1);this.step(e)};if(this.keyPoints&&this.keyTimes){this.pathKeyTimes=this.keyTimes;this.keyTimes=null;this.superValueAt=this.valueAt;this.valueAt=function(e){for(var t=1;t<this.keyPoints.length;++t){var n=this.keyPoints[this.keyPoints.length-1];if(this.pathKeyTimes[t]>e){var r=this.keyPoints[t-1];if(this.calcMode=="discrete")n=r;else{var i=this.pathKeyTimes[t-1];e=(e-i)/(this.pathKeyTimes[t]-i);n=r+(this.keyPoints[t]-r)*e}break}}return this.superValueAt(n)}}this.step=function(e){var t=this.attributeName;e="translate("+e+")";this.target.setAttribute("transform",e)}}else if(a=="animateTransform"){this.isInterpolable=function(e,t){return true};this.getCurVal=function(){var e=this.type;var t=this.target.transform;if(t&&t.animVal.numberOfItems>0){var n=t.animVal;return decompose(n.getItem(0).matrix,e)}else{if(e=="scale")return"1,1";else if(e=="translate")return"0,0";else if(e=="rotate")return"0,0,0";else return 0}};if(this.type=="scale"){this.normalize=function(e){e=e.replace(/,/g," ");var t=e.split(" ");if(t.length==1)t[1]=t[0];t[0]=parseFloat(t[0]);t[1]=parseFloat(t[1]);return t};this.add=function(e,t){var n=new Array;for(var r=0;r<e.length;++r)n.push(e[r]*t[r]);return n.join(",")}}else if(this.type=="translate"){this.translation()}else if(this.type=="rotate"){this.normalize=function(e){e=e.replace(/,/g," ");var t=e.split(" ");if(t.length<3){t[0]=parseFloat(t[0]);t[1]=0;t[2]=0}else{t[0]=parseFloat(t[0]);t[1]=parseFloat(t[1]);t[2]=parseFloat(t[2])}return t};this.add=function(e,t){var n=new Array;for(var r=0;r<e.length;++r)n.push(e[r]+t[r]);return n.join(",")}}if(this.type=="scale"||this.type=="rotate"){if(this.from)this.from=this.normalize(this.from).join(",");if(this.to)this.to=this.normalize(this.to).join(",");if(this.by)this.by=this.normalize(this.by).join(",");if(this.values){var f=this.values.split(";");for(var u=0;u<f.length;++u)f[u]=this.normalize(f[u]).join(",");this.values=f.join(";")}this.interpolate=function(e,t,n){var r=new Array;for(var i=0;i<e.length;++i)r.push(e[i]+(t[i]-e[i])*n);return r.join(",")}}this.step=function(e){var t=this.attributeName;e=this.type+"("+e+")";this.target.setAttribute(t,e)}}var l=this;this.anim.beginElement=function(){l.begin();return true};this.anim.beginElementAt=function(e){l.begin(e*1e3);return true};this.anim.endElement=function(){l.finish();return true};this.anim.endElementAt=function(e){l.finish(e*1e3);return true};this.anim.getStartTime=function(){return parseFloat(l.iterBegin-timeZero)/1e3};this.anim.getCurrentTime=function(){var e=new Date;return parseFloat(e-l.iterBegin)/1e3}}function animate(){var e=new Date;for(var t=0,n=animations.length;t<n;++t){try{if(!animations[t].f(e)){--t;--n}}catch(r){if(r.message!=="Component returned failure code: 0x80004005 (NS_ERROR_FAILURE) [nsIDOMSVGPathElement.getTotalLength]"){if(window.console&&console.log){console.log(r)}else{alert(r)}}}}}function toMillis(e){e=e.trim();var t=e.length;var n=e.indexOf(":");if(n!=-1){var r=e.split(":");var t=r.length;e=0;if(r.length==3)e+=parseInt(r[0])*36e5;e+=parseInt(r[t-2])*6e4;e+=parseFloat(r[t-1])*1e3}else if(t>2&&e.substring(t-2)=="ms"){e=e.substring(0,e.length-2)}else if(t>1&&e.substring(t-1)=="s"){e=e.substring(0,e.length-1);e=e*1e3}else if(t>3&&e.substring(t-3)=="min"){e=e.substring(0,e.length-3);e=e*6e4}else if(t>1&&e.substring(t-1)=="h"){e=e.substring(0,e.length-1);e=e*36e5}else{e=e*1e3}return parseFloat(e)}function decompose(e,t){if(t=="translate")return e.e+","+e.f;var n=e.a;var r=e.b;var i=e.c;var s=e.d;if(t=="rotate")return Math.atan2(i,n)+",0,0";var o=Math.sqrt(n*n+i*i);var u=Math.sqrt(r*r+s*s);if(t=="scale"){var a=n*s-r*i;var f=a==0?0:a/o;var l=u;return f+","+l}var c=n*r+i*s;var h=Math.PI/2-Math.acos(c==0?0:c/(u*o));return h*180/Math.PI}function toRGB(e){if(e.substring(0,3)=="rgb"){e=e.replace(/ /g,"");e=e.replace("rgb(","");e=e.replace(")","");var t=e.split(",");for(var n=0;n<t.length;++n){var r=t[n].length-1;if(t[n].substring(r)=="%")t[n]=Math.round(t[n].substring(0,r)*2.55);else t[n]=parseInt(t[n])}return t}else if(e.charAt(0)=="#"){e=e.trim();var t=new Array;if(e.length==7){t[0]=parseInt(e.substring(1,3),16);t[1]=parseInt(e.substring(3,5),16);t[2]=parseInt(e.substring(5,7),16)}else{t[0]=e.substring(1,2);t[1]=e.substring(2,3);t[2]=e.substring(3,4);t[0]=parseInt(t[0]+t[0],16);t[1]=parseInt(t[1]+t[1],16);t[2]=parseInt(t[2]+t[2],16)}return t}else{return colors[e]}}function createPath(e){var t=document.createElementNS(svgns,"path");t.setAttribute("d",e);try{if(t.normalizedPathSegList)t.myNormalizedPathSegList=t.normalizedPathSegList}catch(n){}if(!t.myNormalizedPathSegList){t.myNormalizedPathSegList=t.pathSegList}return t}function getUnit(e){if(e&&e.substring){for(var t=0,n=units.length;t<n;++t){var r=e.length-units[t].length;if(r>0&&e.substring(r)==units[t]){var i=e.substring(0,r);if(!isNaN(i))return[i,units[t]]}}}return[e,null]}function funk(e,t,n){return function(){e.call(t,n)}}var mpf=33;var splinePrecision=25;var svgns="http://www.w3.org/2000/svg";var smilanimns="http://www.w3.org/2001/smil-animation";var smil2ns="http://www.w3.org/2001/SMIL20";var smil21ns="http://www.w3.org/2005/SMIL21";var smil3ns="http://www.w3.org/ns/SMIL30";var timesheetns="http://www.w3.org/2007/07/SMIL30/Timesheets";var xlinkns="http://www.w3.org/1999/xlink";var animators=new Array;var id2anim=new Object;var animations=new Array;var timeZero;Animator.prototype={register:function(){var e=this.anim.getAttribute("begin");if(!e)e="0";this.schedule(e,this.begin);var t=this.anim.getAttribute("end");if(t)this.schedule(t,this.finish)},schedule:function(e,t){var n=this;var r=e.split(";");for(var i=0;i<r.length;++i){var s=r[i].trim();if(s.length>11&&s.substring(0,10)=="wallclock("){var o=new Date;o.setISO8601(s.substring(10,s.length-1));var u=new Date;var a=o-u;t.call(n,a)}else if(isNaN(parseInt(s))){var f=0;var l=s.indexOf("+");if(l==-1)l=s.indexOf("-");if(l!=-1){f=toMillis(s.substring(l).replace(/ /g,""));s=s.substring(0,l).trim()}l=s.indexOf(".");var c=new Array;if(l==-1){c=[this.target]}else{var h=s.substring(0,l);if(h.indexOf("index(")==0)h=h.substring(6,h.length-1)+this.index;c=getEventTargetsById(h,this.anim)}var p=s.substring(l+1);var d=funk(t,n,f);for(var v=0;v<c.length;++v){var m=c[v];if(m==null)continue;m.addEventListener(p,d,false)}}else{s=toMillis(s);t.call(n,s)}}},getCurVal:function(){if(this.attributeType=="CSS"){return this.target.style.getPropertyValue(this.attributeName)}else{return this.target.getAttributeNS(this.namespace,this.attributeName)}},begin:function(offset){if(this.restart=="never"||this.running&&this.restart=="whenNotActive")return;if(this.running)this.finish();if(offset!=null&&offset>=0){var me=this;var myself=this.begin;var call=function(){myself.call(me)};window.setTimeout(call,offset);return}this.startTime=new Date;if(offset&&offset<0){this.startTime.setTime(this.startTime.getTime()+offset);if(this.startTime<timeZero)return}this.stop();this.running=true;var initVal=this.getCurVal();this.realInitVal=initVal;if(!initVal&&propDefaults[this.attributeName])initVal=propDefaults[this.attributeName];if(this.anim.nodeName=="set")this.step(this.to);this.iteration=0;if(this.values){this.animVals=this.values.split(";");for(var i=0;i<this.animVals.length;++i)this.animVals[i]=this.animVals[i].trim()}else{this.animVals=new Array;if(this.from)this.animVals[0]=this.from;else this.animVals[0]=initVal;if(this.by&&this.animVals[0])this.animVals[1]=this.add(this.normalize(this.animVals[0]),this.normalize(this.by));else this.animVals[1]=this.to}if(this.animVals[this.animVals.length-1]){this.freezed=this.animVals[this.animVals.length-1];if(this.animVals[0]){if((this.animVals[0].substring(0,1)=="#"||colors[this.animVals[0]]||this.animVals[0].length>5&&this.animVals[0].trim().substring(0,4)=="rgb(")&&(this.freezed.substring(0,1)=="#"||colors[this.freezed]||this.freezed.length>5&&this.freezed.trim().substring(0,4)=="rgb("))this.color();else{var cp=new Array;var oneVal=this.animVals[0];var qualified=getUnit(oneVal);cp[0]=qualified[0];this.unit=qualified[1];for(var i=1;i<this.animVals.length;++i){var oneVal=this.animVals[i];var qualified=getUnit(oneVal);if(qualified[1]==this.unit)cp[i]=qualified[0];else{cp=this.animVals;break}}this.animVals=cp}}}this.iterBegin=this.startTime;animations.push(this);for(var i=0;i<this.beginListeners.length;++i)this.beginListeners[i].call();var onbegin=this.anim.getAttribute("onbegin");if(onbegin)eval(onbegin)},normalize:function(e){return e},add:function(e,t){return""+(parseFloat(e)+parseFloat(t))},f:function(e){var t=this.anim;var n=this.computedDur;if(isNaN(n))return true;var r=this.iterBegin;var i=e-r;var s=i/n;if(s>=1)return this.end();var o=parseFloat(this.iteration);if(this.repeatCount&&this.repeatCount!="indefinite"&&o+s>=this.repeatCount){if(this.fill=="freeze")this.freezed=this.valueAt(this.repeatCount-o);return this.end()}if(this.repeatDur&&this.repeatDur!="indefinite"&&e-this.startTime>=toMillis(this.repeatDur)){if(this.fill=="freeze"){var u=toMillis(this.repeatDur)/n;this.freezed=this.valueAt(u-Math.floor(u))}return this.end()}if(t.localName=="set")return true;var a=this.valueAt(s);this.step(a);return true},isInterpolable:function(e,t){var n=!isNaN(e)&&!isNaN(t);if(!n&&e.trim().indexOf(" ")!=-1&&t.trim().indexOf(" ")!=-1){var r=e.trim().split(" ");var i=t.trim().split(" ");n=true;if(r.length==i.length)for(var s=0;s<i.length;++s)if(!this.isInterpolable(r[s],i[s]))return false}return n},valueAt:function(e){var t=this.animVals;if(e==1)return t[t.length-1];if(this.calcMode=="discrete"||!this.isInterpolable(t[0],t[1])){if(this.keyTimes){for(var n=1;n<this.keyTimes.length;++n)if(this.keyTimes[n]>e)return t[n-1];return t[t.length-1]}var r=t.length;var i=Math.floor(e*r);return t[i]}else{var s;if(this.keyTimes){for(var n=1;n<this.keyTimes.length;++n)if(this.keyTimes[n]>e){s=n-1;var o=this.keyTimes[s];e=(e-o)/(this.keyTimes[n]-o);break}}else{var r=t.length-1;s=Math.floor(e*r);e=e%(1/r)*r}if(this.calcMode=="spline")e=this.spline(e,s);return this.interpolate(this.normalize(t[s]),this.normalize(t[s+1]),e)}},spline:function(e,t){var n=this.keySplines[t];var r=n.getTotalLength();var i=r/splinePrecision;for(var s=0;s<=r;s+=i){var o=n.getPointAtLength(s);if(o.x>e){var u=n.getPointAtLength(s-i);e-=u.x;e/=o.x-u.x;return u.y+(o.y-u.y)*e}}var o=n.getPointAtLength(r);var u=n.getPointAtLength(r-i);e-=u.x;e/=o.x-u.x;return u.y+(o.y-u.y)*e},interpolate:function(e,t,n){if(!this.isInterpolable(e,t)){if(n<.5)return e;else return t}if(e.trim().indexOf(" ")!=-1){var r=e.split(" ");var i=t.split(" ");var s=new Array;for(var o=0;o<i.length;++o)s[o]=parseFloat(r[o])+(i[o]-r[o])*n;return s.join(" ")}return parseFloat(e)+(t-e)*n},step:function(e){if(this.unit)e+=this.unit;var t=this.attributeName;var n=this.attributeType;if(n=="CSS"){if(t=="font-size"&&!isNaN(e))e+="px";this.target.style.setProperty(t,e,"")}else{this.target.setAttributeNS(this.namespace,t,e)}},end:function(){if(!this.repeatCount&&!this.repeatDur)return this.finish();else{++this.iteration;var now=new Date;if(this.repeatCount&&this.repeatCount!="indefinite"&&this.iteration>=this.repeatCount)return this.finish();else if(this.repeatDur&&this.repeatDur!="indefinite"&&now-this.startTime>=toMillis(this.repeatDur))return this.finish();else{if(this.accumulate=="sum"){var curVal=this.getCurVal();if(!curVal&&propDefaults[this.attributeName])curVal=propDefaults[this.attributeName];if(this.by&&!this.from){this.animVals[0]=curVal;this.animVals[1]=this.add(this.normalize(curVal),this.normalize(this.by))}else{for(var i=0;i<this.animVals.length;++i)this.animVals[i]=this.add(this.normalize(curVal),this.normalize(this.animVals[i]))}this.freezed=this.animVals[this.animVals.length-1]}this.iterBegin=now;for(var i=0;i<this.repeatIterations.length;++i){if(this.repeatIterations[i]==this.iteration)this.repeatListeners[i].call()}var onrepeat=this.anim.getAttribute("onrepeat");if(onrepeat)eval(onrepeat)}}return true},finish:function(offset){if(this.min&&this.min!="indefinite"){var now=new Date;if(now-this.startTime>=toMillis(this.min))return true}if(offset&&offset>0){var me=this;var myself=this.finish;var call=function(){myself.call(me)};window.setTimeout(call,offset);return true}if(offset&&offset<0){var now=new Date;now.setTime(now.getTime()+offset);if(now<this.startTime)return true}var fill=this.fill;var kept=true;if(fill=="freeze"){this.freeze()}else{this.stop();this.step(this.realInitVal);kept=false}if(this.running){for(var i=0;i<this.endListeners.length;++i)this.endListeners[i].call();var onend=this.anim.getAttribute("onend");if(onend)eval(onend);this.running=false}return kept},stop:function(){for(var e=0,t=animations.length;e<t;++e)if(animations[e]==this){animations.splice(e,1);break}},freeze:function(){this.step(this.freezed)},addEventListener:function(e,t,n){if(e=="begin")this.beginListeners.push(t);else if(e=="end")this.endListeners.push(t);else if(e.length>7&&e.substring(0,6)=="repeat"){var r=e.substring(7,e.length-1);this.repeatListeners.push(t);this.repeatIterations.push(r)}},getPath:function(){var e=this.anim.getElementsByTagNameNS(svgns,"mpath")[0];if(e){var t=e.getAttributeNS(xlinkns,"href");return document.getElementById(t.substring(1))}else{var n=this.anim.getAttribute("path");if(n){var r=createPath(n);return r}}return null},translation:function(){if(this.by&&this.by.indexOf(",")==-1)this.by=this.by+",0";this.normalize=function(e){var t=e.replace(/,/g," ").replace(/ +/," ").split(/ /);if(t.length==1)t[1]="0";t[0]=parseFloat(t[0]);t[1]=parseFloat(t[1]);return t};this.add=function(e,t){var n=e[0]+t[0];var r=e[1]+t[1];return n+","+r};this.isInterpolable=function(e,t){return true};this.interpolate=function(e,t,n){var r=e[0]+(t[0]-e[0])*n;var i=e[1]+(t[1]-e[1])*n;return r+","+i}},color:function(){this.isInterpolable=function(e,t){return true};this.interpolate=function(e,t,n){var r=Math.round(e[0]+(t[0]-e[0])*n);var i=Math.round(e[1]+(t[1]-e[1])*n);var s=Math.round(e[2]+(t[2]-e[2])*n);var o="rgb("+r+","+i+","+s+")";return o};this.normalize=function(e){var t=toRGB(e);if(t==null)return toRGB(propDefaults[this.attributeName]);return t};this.add=function(e,t){var n=new Array;for(var r=0;r<e.length;++r)n.push(Math.min(e[r],255)+Math.min(t[r],255));return n.join(",")}},d:function(){this.isInterpolable=function(e,t){return true};this.interpolate=function(e,t,n){var r="";var i=e.myNormalizedPathSegList;var s=t.myNormalizedPathSegList;var o;var u;for(var a=0;a<i.numberOfItems&&a<s.numberOfItems;++a){o=i.getItem(a);u=s.getItem(a);typeFrom=o.pathSegType;typeTo=u.pathSegType;if(typeFrom==1||typeTo==1)r+=" z ";else{var f=o.x+(u.x-o.x)*n;var l=o.y+(u.y-o.y)*n;if(typeFrom==2||typeTo==2)r+=" M ";else if(typeFrom==4||typeTo==4)r+=" L ";else{var c=o.x1+(u.x1-o.x1)*n;var h=o.y1+(u.y1-o.y1)*n;var p=o.x2+(u.x2-o.x2)*n;var d=o.y2+(u.y2-o.y2)*n;r+=" C "+c+","+h+" "+p+","+d+" "}r+=f+","+l}}return r};this.normalize=function(e){var t=createPath(e);return t}}};var units=["grad","deg","rad","kHz","Hz","em","em","px","pt","pc","mm","cm","in","ms","s","%"];var colors={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],grey:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]};var propDefaults={font:"see individual properties","font-family":"Arial","font-size":"medium","font-size-adjust":"none","font-stretch":"normal","font-style":"normal","font-variant":"normal","font-weight":"normal",direction:"ltr","letter-spacing":"normal","text-decoration":"none","unicode-bidi":"normal","word-spacing":"normal",clip:"auto",color:"depends on user agent",cursor:"auto",display:"inline",overflow:"hidden",visibility:"visible","clip-path":"none","clip-rule":"nonzero",mask:"none",opacity:"1","enable-background":"accumulate",filter:"none","flood-color":"black","flood-opacity":"1","lighting-color":"white","stop-color":"black","stop-opacity":"1","pointer-events":"visiblePainted","color-interpolation":"sRGB","color-interpolation-filters":"linearRGB","color-profile":"auto","color-rendering":"auto",fill:"black","fill-opacity":"1","fill-rule":"nonzero","image-rendering":"auto","marker-end":"none","marker-mid":"none","marker-start":"none","shape-rendering":"auto",stroke:"none","stroke-dasharray":"none","stroke-dashoffset":"0","stroke-linecap":"butt","stroke-linejoin":"miter","stroke-miterlimit":"4","stroke-opacity":"1","stroke-width":"1","text-rendering":"auto","alignment-baseline":"0","baseline-shift":"baseline","dominant-baseline":"auto","glyph-orientation-horizontal":"0","glyph-orientation-vertical":"auto",kerning:"auto","text-anchor":"start","writing-mode":"lr-tb"};if(typeof String.prototype.trim!=="function"){window._trimRegExp=new RegExp("^\\s+|\\s+$","g");String.prototype.trim=function(){return this.replace(window._trimRegExp,"")}}if(!isNaN(Date.parse("2012-04-22T19:53:32Z"))){Date.prototype.setISO8601=function(e){this.setTime(Date.parse(e))}}else{window._setISO8601RegExp=new RegExp("([0-9]{4})(-([0-9]{2})(-([0-9]{2})"+"(T([0-9]{2}):([0-9]{2})(:([0-9]{2})(.([0-9]+))?)?"+"(Z|(([-+])([0-9]{2}):([0-9]{2})))?)?)?)?");Date.prototype.setISO8601=function(e){var t=window._setISO8601RegExp.exec(e);var n=0;var r=new Date(t[1],0,1);if(t[3]){r.setMonth(t[3]-1)}if(t[5]){r.setDate(t[5])}if(t[7]){r.setHours(t[7])}if(t[8]){r.setMinutes(t[8])}if(t[10]){r.setSeconds(t[10])}if(t[12]){r.setMilliseconds(Number("0."+t[12])*1e3)}if(t[14]){n=Number(t[16])*60+Number(t[17]);n*=t[15]=="-"?1:-1}n-=r.getTimezoneOffset();time=Number(r)+n*60*1e3;this.setTime(Number(time))}}try{window.addEventListener("load",initSMIL,false)}catch(exc){}